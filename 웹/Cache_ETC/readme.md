# 캐시, 기타 네트워크

캐시 : 자주 쓰이는 문서의 사본을 자동으로 보관하는 HTTP 장치다.

웹 요청이 캐시에 도착했을 때, 캐시된 로컬 사본이 존재한다면,

그 문서는 원서버가 아니라 캐시로부터 제공된다.

네트워크 상에서 무언가를 가져오는 것은 느리고 비용이 크다. 크기가 큰 응답 들은 클라이언트와 서버 사이에 많은 왕복작업이 드는데 그것은 자원이 필요할 때나 브라우저가 작업을 할 때 지연을 시키고 방문자에게 데이터 비용을 초래한다. 결과적으로 캐시 능력과 이전 자원을 재사용하는 것은 성능 최적화에 있어서 매우 중요한 부분이다.

**캐싱 기본 개념 : 캐싱**(Caching)은 애플리케이션의 처리 속도를 높여준다. 이미 가져온 데이터나 계산된 결과값의 복사본을 저장함으로써 처리 속도를 향상시키며, 이를 통해 향후 요청을 더 빠르게 처리할 수 있다. 대부분의 프로그램이 동일한 데이터나 명령어에 반복해서 엑세스하기 때문에 캐싱은 효율적인 아키텍처 패턴이다.

**웹 캐시(WEB Cache) :**  사용자(client)가 웹 사이트(server)에 접속할 때, 정적 컨텐츠(이미지, JS, CSS 등)를 특정 위치(client, network 등)에 저장하여, 웹 사이트 서버에 해당 컨텐츠를 매번 요청하여 받는것이 아니라, 특정 위치에서 불러옴으로써 사이트 응답시간을 줄이고, 서버 트래픽 감소 효과를 볼 수 있다.

장점

- 불필요한 데이터 전송을 줄여서, 네트워크 요금으로 인한 비용을 줄여준다.
- 캐시는 네트워크 병목을 줄여준다. 대역폭을 늘리지 않고도 페이지를 빨리 불러올 수 있게 된다.
- 캐시는 원서버에 대한 요청을 줄여준다. 서버는 부하를 줄일 수 있으며 더 빨리 응답할 수 있게 된다.
- 캐시는 거리로 인한 지연을 줄여준다.

종류

**1. Browser Caches**

- 브라우저 또는 HTTP요청을 하는 Client Application에 의해 내부 디스크에 캐쉬
- Cache된 Resource를 공유하지 않는 한 개인에 한정된 Cache
- 브라우저의 Back버튼 또는 이미 방문한 페이지를 재 방문하는 경우 극대화

**2. Proxy Caches**

- Browser Cache와 동일한 원리로 동작하며 Client나 Server가아닌 네트워크 상에서 동작.
- 큰회사나 IPS의 방화벽에 설치 되며 대기시간 & 트래픽 감소, 접근정책 & 제한 우회, 사용률 기록등 수행
- 한정된 수의 클라이언트을 위하여 무한대의 웹서버의 컨텐츠를 캐쉬

**3. Gateway Caches (REVERSE OR SURROGATE PROXY)**

- 서버 앞 단에 설치되어 요청에 대한 캐쉬 및 효율적인 분배를 통해 가용성, 신뢰성, 성능등을 향상
- Encryption / SSL acceleration, Load balancing, Serve/cache static content, Compression등을 수행
- 무한대의 클라이언트들에게 한정된 수(또는 하나)의 웹서버 컨텐츠를 제공

### 적중과 부적중

캐시에 요청이 도착했을 때, 사본이 있다면 그것을 이용해 요청을 처리(적중)

사본이 없다면 그냥 원 서버로 전달(부적중)

### 재검사 (Revalidation) (신선도 검사)

서버 콘텐츠는 변경될 수 있기 때문에 사용자가 가지고 있는 캐시의 사본이 여전히 최신인지 서버를 통해 점검하는 과정

이러한 신선도 검사를 HTTP재검사라 부른다.

1. (재검사 적중) 콘텐츠가 변경되지 않았다면 서버는 304 Not Modified 응답을 보낸다.
2. (재검사 부적중) 변경 되었으면 서버는 콘텐츠 전체와 함께 HTTP 200 OK 코드를 클라이언트에게 전송한다.
3. (객체 삭제) 서버 객체가 삭제되었다면, 서버는 404 Not Found 응답을 돌려보내며 캐시는 사본을 삭제한다.

### 적중률

- 캐시가 요청을 처리하는 비율을 캐시 적중률 or 문서 적중률이라고부른다. (40%면 괜찮은 편)

### 바이트 적중률

- 바이트 단위 적중률은 캐시를 통해 제공된 모든 바이트의 비율을 표현한다.

### 캐시 처리 단계 (HTTP GET 메시지 발생)

1. 요청 받기 - 캐시는 네트워크로 부터 도착한 요청 메시지를 읽는다.
2. 파싱 - 캐시는 메시지를 파싱하여 URL과 헤더들을 추출한다.
3. 검색 - 캐시는 캐시는 로컬 복사본이 있는지 검사하고, 사본이 없다면 사본을 받아온다(그리고 로컬에 저장한다).
4. 신선도 검사 - 캐시는 캐시된 사본이 충분히 신선한지 검사하고, 신선하지 않다면 서버에게 변경사항이 있는지 물어본다.
5. 응답 생성 - 캐시는 새로운 헤더와 캐시된 본문으로 응답 메시지를 만든다.
6. 발송 - 캐시는 네트워크를 통해 응답을 클라이언트에게 돌려준다.
7. 로깅 - 선택적으로, 캐시는 로그파일에 트랜잭션에 대해 서술한 로그 하나를 남긴다.

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5,%20%E1%84%80%E1%85%B5%E1%84%90%E1%85%A1%20ef1d4/Untitled.png)

[https://web-km.tistory.com/20](https://web-km.tistory.com/20)

# 기타 네트워크

### OSI 7계층

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5,%20%E1%84%80%E1%85%B5%E1%84%90%E1%85%A1%20ef1d4/Untitled%201.png)

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5,%20%E1%84%80%E1%85%B5%E1%84%90%E1%85%A1%20ef1d4/Untitled%202.png)

**리피터** : 물리 계층 기능 지원, 신호를 증폭하여 다른 쪽으로 중계(증폭기)

**허브** : 물리 계층 기능 지원, 네트워크에 다수의 시스템을 연결할 때 사용(공유기)

**브릿지** : 리피터 기능에 데이터 링크 계층의 기능이 추가된 것으로 물리 계층에서 발생한 오류 해결

**라우터** : 물리, 데이터 링크, 네트워크, 계층 기능 지원, 네트워크 경로선택 기능 제공, 네트워크와 호스트에 대한 정보는 일반적으로  **라우팅 테이블**에 보관된다.

[https://heisyoung.tistory.com/52](https://heisyoung.tistory.com/52)

- 1계층 : 물리 계층 - Frame
- 2계층 : 데이터링크 계층 - Frame
- 3계층 : 네트워크 계층 - Datagram, Packet
- 4계층 : 전송 계층 - Segment
- 5계층 : 응용 계층 - User Data

**IPv4** = 현재 사용, 각각의 숫자는 0~225까지의 숫자를 사용, 32 비트 체계, 8비트 씩 4개로 구성

**IPv6** = IPv4의 확장성의 문제점 때문에 만듬, 주소 표현 공간을 32 -> 128비트로 확장

![Untitled](%E1%84%8F%E1%85%A2%E1%84%89%E1%85%B5,%20%E1%84%80%E1%85%B5%E1%84%90%E1%85%A1%20ef1d4/Untitled%203.png)

**Multicast** : 보내고자 하는 정보를 그룹 내의 일정 네트워크 장비에게만 한번에 보낼 수 있는 통신

**Broadcast** : 로컬 랜 상에 붙어있는 모든 네트워크 장비들에게 보내는 통신이다.

**Unicast** : 목적지 MAC주소와 일치 시 CPU로 올려줌, 가장많이 사용  고유 주소로 식별된 하나의 네트워크 목적지에 1:1로 ( one-to-one) 트래픽 또는 메시지를 전송하는 방식을 말한다.

**Simplex** : (단방향 통신) 한쪽 방향으로만 전송 가능

**Half-Duplex** (반이중 통신) 한 쪽이 송신하는 동안 다른 쪽에서 수신하는 방식

**Full-Duplex** (전이중 통신) 각각 독립된 회선을 사용하는 통신방식

**ARP** : 상대방 호스트의 IP주소를 이용해  MAC 주소를 구하는 기능

**RARP** : MAC 주소를 IP주소로 변환 하는 기능

### 교환 시스템

**네트워크에 연결된 호스트들이 데이터를 전달할때 전송 경로에 위치한 교환시스템을 지나게 된다.**

### 교환 시스템 종류

1. **회선 교환 방식**(Circuit Switching) : 회선 교환 방식은 고정 대역으로 할당된 연결을 설정하여 데이터 전송을 시작한다. 안정적인 전송률로 데이터를 전송 가능
2. **메시지 교환 방식(**Message Switching**) :** 축적교환방식으로 교환기가 호출자의 메시지를 받았다가 피호출자에게 보내주는 방식이다.(데이터를 전송하기 전에 경로를 미리 설정하지 않고, 대신 전송하는 메시지의 헤더마다 목적지 주소를 표시하는 방식이다. 중간의 교환 시스템은 이전 교환 시스템에서 보낸 전체 메시지가 도착할 때까지 받은 메시지를 일시적으로 버퍼에 저장한 후 이 후 모든 메시지가 도착하면 다음 교환 시스템으로 전달하는 방식을 사용하므로 메시지 전송이 교환기 단위로 이어진다.

장점 : 교환 시스템에서 전송 데이터를 저장하는 기능을 제공하기 때문에 송신 호스트가 보낸 시점과 수신 호스트가 받은 시점이 반드시 일치할 필요가 없다는 것이다.

1. **패킷 교환 방식**(Packet Switcing) 회선 교환과 메시지 교환의 장점을 모두 이용한다. 송신 호스트는 전송할 데이터를 패킷이라는 일정 크기로 나누어 전송하며, 각 패킷은 독립적으로 라우팅 과정을 거쳐 목적지에 도착한다. 

장점

1. 전송 대역의 효율적 이용
2. 호스트의 무제한 수용
3. 패킷에 우선순위 부여

단점

1. 회선 교환 방식에 비해 더 많은 지연 발생 ex) 전송 패킷을 라우터의 내부 버퍼에 보관하는 과정, 여러 종류의 대기 큐를 거치는 과정에서 가변 지연이 발생
2. 각각 독립적인 경로로 전달되므로 패킷마다 전송에 걸리는 시간이 일정하지 않을 수 있다..

**패킷 경로 선택 방식**

1. 정적 경로(Static Routing)

호스트 사이의 전송 경로를 미리 고정 하는 방식

 2.동적 경로(Dynamic Routing)

네트워크 혼잡도를 비롯한 주변 상황에 따라 전송 경로를 지속적으로 조정하는 방식

4. **프레임 릴레이, 셀 릴레이**

데이터 링크 계층의 기능을 단순하게해 고속 데이터전송을 지원할 수 있도록 고안한 방식.

**DNS(Domain Name System)**

호스트의 도메인 이름을 호스트의 네트워크 주소로 바꾸거나 그 반대의 변환을 수행할 수 있도록 하기 위해 개발되었다.

주소와 이름 정보를 자동으로 유지하고 관리하는 분산 데이터베이스 시스템이다. 호스트 주소와 이름 정보는 **네임 서버**라는 특정한 관리 호스트가 유지,